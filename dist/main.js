!function(r){var e={};function t(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return r[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=r,t.c=e,t.d=function(r,e,a){t.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:a})},t.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,e){if(1&e&&(r=t(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var n in r)t.d(a,n,function(e){return r[e]}.bind(null,n));return a},t.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(e,"a",e),e},t.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},t.p="",t(t.s=0)}([function(r,e,t){"use strict";t.r(e);var a=function(){var r,e=(r={},["A","B","C","D","E","F","G","H","I","J"].forEach((function(e){for(var t=function(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}({},e,{}),a=0;a<10;a++)t[e][a]=null;Object.assign(r,t)})),{grid:r}),t={placeShip:function(r,e,t){var a=function(r){var e={length:r};return Object.assign({},e,{placesHit:[]},{isSunk:function(){return!(this.placesHit.length<this.length)}},{hit:function(r){r<this.length&&(this.placesHit.find((function(e){if(e===r)return e}))||this.placesHit.push(r))}})}(e);if(a.location=r,a.direction=t,"vertical"===t)for(var n=0;n<e;n++)this.grid[r[0]][r[1]+n]=a;else if("horizontal"===t)for(var o=0;o<e;o++){var i=r[0].charCodeAt(0)+o;i=String.fromCharCode(i),this.grid[i][r[1]]=a}}};return Object.assign({},e,{receiveAttack:function(r,e){if("x"===this.grid[r][e])return!1;if(this.grid[r][e]){var t=this.grid[r][e].location,a=[r,e],n=0;n="vertical"===this.grid[r][e].direction?a[1]-t[1]:a[0].charCodeAt(0)-t[0].charCodeAt(0),this.grid[r][e].hit(n)}else this.missedAttacks.push([r,e]),this.grid[r][e]="x"}},t,{missedAttacks:[]},{isAllSunk:function(){for(var r in this.grid)for(var e in this.grid[r])if(this.grid[r][e]&&"x"!==this.grid[r][e]){if(!0===this.grid[r][e].isSunk())continue;return!1}return!0}})},n=function(){var r=document.querySelector(".player"),e=document.querySelector(".computer"),t=["A","B","C","D","E","F","G","H","I","J"];[r,e].forEach((function(r){for(var e=document.createElement("table"),a=document.createElement("tr"),n=-1;n<10;n++){var o=document.createElement("td");-1!==n?(o.textContent=t[n],a.appendChild(o)):a.appendChild(o)}e.appendChild(a);for(var i=0;i<10;i++){var c=document.createElement("tr"),l=document.createElement("td");l.textContent=i,c.appendChild(l);for(var d=0;d<10;d++){var u=document.createElement("td");u.dataset.horizontal=t[d],u.dataset.vertical=i,c.appendChild(u)}e.appendChild(c)}r.appendChild(e)}));function a(r,e,t,a){r.childNodes.forEach((function(r){r.childNodes.forEach((function(r){r.dataset.horizontal===e&&r.dataset.vertical===t&&("missed"===a?r.textContent="X":"exist"===a?r.style.backgroundColor="#c4c4c4":"hit"===a&&(r.style.backgroundColor="#c4c4c4",r.textContent="X",r.style.color="#1e1e1e"))}))}))}return{renderBoard:function(t,n){var o="human"===t?r.childNodes[0]:e.childNodes[0];if("human"===t){var i=function(r){var e=function(e){if(null===n[r][e])return"continue";if("x"===n[r][e])a(o,r,e,"missed");else if(n[r][e]){var t=n[r][e].location,i=n[r][e].direction,c=n[r][e].placesHit,l="";0===c.length?a(o,r,e,"exist"):("vertical"===i?l=e-t[1]:"horizontal"===i&&(l=r.charCodeAt(0)-t[0].charCodeAt(0)),c.forEach((function(t){t===l&&a(o,r,e,"hit")})))}};for(var t in n[r])e(t)};for(var c in n)i(c)}else if("computer"===t){var l=function(r){var e=function(e){if(null===n[r][e])return"continue";if("x"===n[r][e])a(o,r,e,"missed");else if(n[r][e]){var t=n[r][e].location,i=n[r][e].direction,c=n[r][e].placesHit,l="";c.length>0&&("vertical"===i?l=e-t[1]:"horizontal"===i&&(l=r.charCodeAt(0)-t[0].charCodeAt(0)),c.forEach((function(t){t===l&&a(o,r,e,"hit")})))}};for(var t in n[r])e(t)};for(var d in n)l(d)}},renderWinner:function(r){var e=document.querySelector(".winner");if(e.childNodes.length>1)return!1;var t=document.createElement("p");"human"===r?t.textContent="Congratulations! You Won!":"computer"===r&&(t.textContent="Too bad! You Lost!"),e.appendChild(t)}}}(),o=function(){var r={},e={},t={},o={};function i(r){"human"===t.type?t.attack(o,r):"computer"===t.type&&t.attack(o),n.renderBoard(o.type,o.playerGameboard.grid);var e=t;t=o,o=e}function c(){var t=!0===r.playerGameboard.isAllSunk()?"computer":!0===e.playerGameboard.isAllSunk()?"human":null;t&&n.renderWinner(t)}return{startGame:function(){var i;i=a(),r=Object.assign({},{playerGameboard:i},{attack:function(r,e){r.playerGameboard.receiveAttack(e[0],e[1])}},{type:"human"}),e=function(){var r=a();!function(){i(5),i(4);for(var r=0;r<2;r++)i(3);for(var e=0;e<3;e++)i(2);for(var t=0;t<4;t++)i(1)}();var e=[],t={attack:function(r){var t=0,a="",n=[];do{var o=Math.ceil(0),i=Math.floor(9);a="ABCDEFGHIJ".charAt(Math.floor(Math.random()*(i-o+1))+o),t=Math.floor(Math.random()*(i-o+1))+o,n=[a,t]}while(e.find((function(r){return r===n})));r.playerGameboard.receiveAttack(a,t),e.push(n)}};function n(){var r=Math.ceil(0),e=Math.floor(1);return 0===Math.floor(Math.random()*(e-r+1))+r?"horizontal":"vertical"}function o(e,t,a){if("vertical"===a){for(var n=0;n<t;n++)if(r.grid[e[0]][e[1]+n])return!0;return!1}if("horizontal"===a){for(var o=0;o<t;o++){var i=e[0].charCodeAt(0)+o;try{r.grid[String.fromCharCode(i)][e[1]]}catch(r){return!0}if(r.grid[String.fromCharCode(i)][e[1]])return!0}return!1}}function i(e){var t,a,i=[],c="";do{t=void 0,a=void 0,t=Math.ceil(0),a=Math.floor(9),i=["ABCDEFGHIJ".charAt(Math.floor(Math.random()*(a-t+1))+t),Math.floor(Math.random()*(a-t+1))+t],c=n()}while(o(i,e,c));r.placeShip(i,e,c)}return Object.assign({},{playerGameboard:r},t,{type:"computer"})}(),t=r,o=e,r.playerGameboard.placeShip(["A",0],5,"horizontal"),r.playerGameboard.placeShip(["A",1],4,"horizontal"),r.playerGameboard.placeShip(["F",0],3,"horizontal"),r.playerGameboard.placeShip(["F",1],3,"vertical"),r.playerGameboard.placeShip(["B",7],2,"horizontal"),r.playerGameboard.placeShip(["B",8],2,"horizontal"),r.playerGameboard.placeShip(["B",9],2,"horizontal"),r.playerGameboard.placeShip(["G",9],1,"horizontal"),r.playerGameboard.placeShip(["H",9],1,"horizontal"),r.playerGameboard.placeShip(["I",9],1,"horizontal"),r.playerGameboard.placeShip(["J",9],1,"horizontal"),n.renderBoard("human",r.playerGameboard.grid)},runOneRound:function(r){i(r),c(),i(),c()}}}();o.startGame(),document.querySelector(".computer").childNodes[0].childNodes.forEach((function(r){r.childNodes.forEach((function(r){r.addEventListener("click",(function(r){var e=[r.target.dataset.horizontal,r.target.dataset.vertical];o.runOneRound(e)}))}))}))}]);
//# sourceMappingURL=main.js.map