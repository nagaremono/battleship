!function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=0)}([function(t,r,e){"use strict";e.r(r);var n=function(){var t,r=(t={},["A","B","C","D","E","F","G","H","I","J"].forEach((function(r){for(var e=function(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}({},r,{}),n=0;n<10;n++)e[r][n]=null;Object.assign(t,e)})),{grid:t}),e={placeShip:function(t,r,e){var n=function(t){var r={length:t};return Object.assign({},r,{placesHit:[]},{isSunk:function(){return!(this.placesHit.length<this.length)}},{hit:function(t){t<this.length&&(this.placesHit.find((function(r){if(r===t)return r}))||this.placesHit.push(t))}})}(r);if(n.location=t,n.direction=e,"vertical"===e)for(var o=0;o<r;o++)this.grid[t[0]][t[1]+o]=n;else if("horizontal"===e)for(var a=0;a<r;a++){var i=t[0].charCodeAt(0)+a;i=String.fromCharCode(i),this.grid[i][t[1]]=n}}};return Object.assign({},r,{receiveAttack:function(t,r){if("x"===this.grid[t][r])return!1;if(this.grid[t][r]){var e=this.grid[t][r].location,n=[t,r],o=0;o="vertical"===this.grid[t][r].direction?n[1]-e[1]:n[0].charCodeAt(0)-e[0].charCodeAt(0),this.grid[t][r].hit(o)}else this.missedAttacks.push([t,r]),this.grid[t][r]="x"}},e,{missedAttacks:[]},{isAllSunk:function(){for(var t in this.grid)for(var r in this.grid[t])if(this.grid[t][r]&&"x"!==this.grid[t][r]){if(!0===this.grid[t][r].isSunk())continue;return!1}return!0}})},o=function(){var t=document.querySelector(".player"),r=document.querySelector(".computer"),e=["A","B","C","D","E","F","G","H","I","J"];[t,r].forEach((function(t){for(var r=document.createElement("table"),n=document.createElement("tr"),o=-1;o<10;o++){var a=document.createElement("td");-1!==o?(a.textContent=e[o],n.appendChild(a)):n.appendChild(a)}r.appendChild(n);for(var i=0;i<10;i++){var c=document.createElement("tr"),l=document.createElement("td");l.textContent=i,c.appendChild(l);for(var u=0;u<10;u++){var d=document.createElement("td");d.dataset.horizontal=e[u],d.dataset.vertical=i,c.appendChild(d)}r.appendChild(c)}t.appendChild(r)}));function n(t,r,e,n){t.childNodes.forEach((function(t){t.childNodes.forEach((function(t){t.dataset.horizontal===r&&t.dataset.vertical===e&&("missed"===n?t.textContent="X":"exist"===n?t.style.backgroundColor="#c4c4c4":"hit"===n&&(t.style.backgroundColor="#c4c4c4",t.textContent="X",t.style.color="#1e1e1e"))}))}))}return{renderBoard:function(e,o){var a="human"===e?t.childNodes[0]:r.childNodes[0],i=function(t){var r=function(r){if(null===o[t][r])return"continue";if("x"===o[t][r])n(a,t,r,"missed");else if(o[t][r]){var i=o[t][r],c=i.location,l=i.direction,u=i.placesHit,d="";0===u.length&&"human"===e&&n(a,t,r,"exist"),u.length>0&&("vertical"===l?d=r-c[1]:"horizontal"===l&&(d=t.charCodeAt(0)-c[0].charCodeAt(0)),u.forEach((function(e){e===d&&n(a,t,r,"hit")})))}};for(var i in o[t])r(i)};for(var c in o)i(c)},renderWinner:function(t){var r=document.querySelector(".winner");if(r.childNodes.length>1)return!1;var e=document.createElement("p");"human"===t?e.textContent="Congratulations! You Won!":"computer"===t&&(e.textContent="Too bad! You Lost!"),0===r.childNodes.length&&r.appendChild(e)}}}(),a=function(){var t={},r={},e={},i={};function c(t){"human"===e.type?e.attack(i,t):"computer"===e.type&&e.attack(i),o.renderBoard(i.type,i.playerGameboard.grid);var r=e;e=i,i=r}function l(){var e=!0===t.playerGameboard.isAllSunk()?"computer":!0===r.playerGameboard.isAllSunk()?"human":null;e&&o.renderWinner(e)}return{startGame:function(){var c;c=n(),t=Object.assign({},{playerGameboard:c},{attack:function(t,r){t.playerGameboard.receiveAttack(r[0],r[1])}},{type:"human"}),r=function(){var t=n();!function(){i(5),i(4);for(var t=0;t<2;t++)i(3);for(var r=0;r<3;r++)i(2);for(var e=0;e<4;e++)i(1)}();var r=[],e={attack:function(t){var e=0,n="",o=[];do{var a=Math.ceil(0),i=Math.floor(9);n="ABCDEFGHIJ".charAt(Math.floor(Math.random()*(i-a+1))+a),e=Math.floor(Math.random()*(i-a+1))+a,o=[n,e]}while(r.find((function(t){return t===o})));t.playerGameboard.receiveAttack(n,e),r.push(o)}};function o(){var t=Math.ceil(0),r=Math.floor(1);return 0===Math.floor(Math.random()*(r-t+1))+t?"horizontal":"vertical"}function a(r,e,n){if("vertical"===n){for(var o=0;o<e;o++)if(t.grid[r[0]][r[1]+o])return!0;return!1}if("horizontal"===n){for(var a=0;a<e;a++){var i=r[0].charCodeAt(0)+a;try{t.grid[String.fromCharCode(i)][r[1]]}catch(t){return!0}if(t.grid[String.fromCharCode(i)][r[1]])return!0}return!1}}function i(r){var e,n,i=[],c="";do{e=void 0,n=void 0,e=Math.ceil(0),n=Math.floor(9),i=["ABCDEFGHIJ".charAt(Math.floor(Math.random()*(n-e+1))+e),Math.floor(Math.random()*(n-e+1))+e],c=o()}while(a(i,r,c));t.placeShip(i,r,c)}return Object.assign({},{playerGameboard:t},e,{type:"computer"})}(),e=t,i=r,function(){var r=JSON.parse(localStorage.getItem("form")),e=[5,4,3,3,2,2,2,1,1,1,1],n=0,o=!0,a=!1,i=void 0;try{for(var c,l=r[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value,d=[u.horizontal,+u.vertical],f=u.direction;t.playerGameboard.placeShip(d,e[n],f),n++}}catch(t){a=!0,i=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw i}}}(),o.renderBoard("human",t.playerGameboard.grid),document.querySelector(".computer").childNodes[0].childNodes.forEach((function(t){t.childNodes.forEach((function(t){t.addEventListener("click",(function(t){if("X"!==t.target.textContent&&"#c4c4c4"!==t.target.style.backgroundColor){var r=[t.target.dataset.horizontal,t.target.dataset.vertical];a.runOneRound(r)}}))}))}))},runOneRound:function(t){c(t),l(),c(),l()}}}()}]);
//# sourceMappingURL=main.js.map